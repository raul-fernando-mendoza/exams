<mat-card class="action-card" *ngIf="!isLoggedIn()">
    <mat-card-title>Bienvenido</mat-card-title>
    <mat-card-content>
      <p>Por favor presione en login o registrese</p>
    </mat-card-content>
</mat-card>


<mat-card class="action-card" *ngIf="isLoggedIn() && !isEmailVerified()" >
    <mat-card-title>Email no ha sido verificado</mat-card-title>
    <mat-card-content>
      <p>Su email no ha sido verificado. si desea enviar un nuevo link presione el boton</p>
    </mat-card-content>
    <mat-divider inset></mat-divider>
    <mat-card-actions>
        <button mat-raised-button color="primary" (click)="emailVerify()" >Enviar email</button>
    </mat-card-actions>
    <mat-card-footer>
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </mat-card-footer>
</mat-card>

<div >
  <mat-accordion multi>
    <mat-expansion-panel class="chains" *ngIf="isLoggedIn()" [expanded]="isLoggedIn()">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Mis Materias
        </mat-panel-title>
      </mat-expansion-panel-header>
      <mat-expansion-panel-content class=".chains">
        <mat-card *ngFor="let me of myEnrollments" class="enrolled-materia-card">
          <mat-card-title-group>
              <mat-card-title>{{ me.materia_name }}</mat-card-title>
              <mat-card-subtitle>
                <a *ngIf="me.certificate_url" href="{{ me.certificate_url }}">certificado</a> 
                <div *ngIf="!me.certificate_url">No Completado</div>
              </mat-card-subtitle>
              <img mat-card-sm-image src="https://storage.googleapis.com/certificates-thoth-qa/certificates_logos/{{ me.iconCertificate }}">
                                          
          </mat-card-title-group>
          <mat-card-content>
            <table>
              <tr *ngFor="let e of me.exams">
                  <td>
                    <button *ngIf='e && e.isReleased' mat-button (click)='onOpenExamGrade(e.examGrade_id)'>{{ e.exam_name }}</button>
                    <div *ngIf='!(e && e.isReleased)'>{{ e.exam_name }}</div>
                  </td>
                  <td>
                    <div *ngIf='e.isReleased'><mat-icon>done</mat-icon></div>
                    <div *ngIf='!(e.isReleased)'><mat-icon>error</mat-icon></div>
                  </td>
              </tr>
            </table>  
          </mat-card-content>
        </mat-card>
      </mat-expansion-panel-content>  
    </mat-expansion-panel>
    <mat-expansion-panel [expanded]="!isLoggedIn() ">
      <mat-expansion-panel-header>
        <mat-panel-title>
          Materias
        </mat-panel-title>
      </mat-expansion-panel-header>
      <mat-card-content>
        <mat-card *ngFor="let m of materias" class="materia-card">
          <mat-card-title-group>
              <mat-card-title class="enroll-card">{{ m.materia_name }}</mat-card-title>
              <mat-card-subtitle>
                {{ m.description }}
              </mat-card-subtitle>
              <img mat-card-sm-image src="https://storage.googleapis.com/certificates-thoth-qa/certificates_logos/{{ m.iconCertificate }}">
                                          
          </mat-card-title-group>
          <mat-card-content>
        
            <video *ngIf="m.videoUrl" class="video-js vjs-default-skin" controls preload="auto"
            width="640" height="264" vjs-video vjs-setup="options">
              <source src="{{ m.videoUrl }}" type='video/mp4' />
            </video>            
          </mat-card-content>
          <mat-card-actions>
            <button mat-button *ngIf="isLoggedIn()" color="primary" (click)="onEnrollar(m.id)">Enrollar</button>
            <button mat-button *ngIf="!isLoggedIn()" color="primary" (click)="onEnrollar(null)">Login o registrese para Enrollarte</button>
          </mat-card-actions>
        </mat-card>
      </mat-card-content>  
    </mat-expansion-panel>    
  </mat-accordion>
</div>