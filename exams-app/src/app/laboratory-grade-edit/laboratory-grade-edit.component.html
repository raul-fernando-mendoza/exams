<p>Leccion interactiva</p>
<div *ngIf="laboratoryGrade">
    <h1 *ngIf="laboratory" >{{laboratory.label}}</h1> 
    <span *ngIf="laboratoryGrade.status == LaboratoryGradeStatus.initial">Por favor vea el video de instrucciones y envie un video cumpliendo con las instrucciones para su revision</span>
    <span *ngIf="laboratoryGrade.status == LaboratoryGradeStatus.requestGrade">El video ha sido enviado a revision</span>
    <span *ngIf="laboratoryGrade.status == LaboratoryGradeStatus.accepted ">El video ha sido aceptado</span>
    <span *ngIf="laboratoryGrade.status == LaboratoryGradeStatus.rework">
        Su video requiere ser retrabajado. por favor revise las observaciones, suba un nuevo video y solicite una nueva revision
    </span>

    <mat-stepper orientation="vertical" >
        <mat-step label="Intrucciones">
            <div *ngIf="laboratory">
                <yt-player [videoId]="getVideoId(laboratory.videoUrl)"></yt-player>                                 
                <mat-divider></mat-divider>
                <div *ngIf="laboratory.soundUrl">
                    <h3>Audio para practicas</h3>           
                    <audio controls>
                        <source [src]="laboratory.soundUrl" type="audio/mp3">
                        Your browser does not support the audio tag.
                    </audio>    
                </div>  
            </div>       
            <button *ngIf="laboratoryGrade.status != LaboratoryGradeStatus.requestGrade" mat-button matStepperNext>Next</button>
        </mat-step>
        <mat-step *ngIf="(laboratoryGrade.status == LaboratoryGradeStatus.requestGrade && isAdmin ) || laboratoryGrade.status == LaboratoryGradeStatus.rework || laboratoryGrade.status == LaboratoryGradeStatus.accepted" label="Revisiones">
                <div >
                    <app-video-marks  *ngIf="laboratoryGrade.studentData && laboratoryGrade.studentData.videoUrl" source="{{laboratoryGrade.studentData.videoUrl}}" path="{{path}}" drawing_id="{{laboratoryGrade.id}}"></app-video-marks>
            
                    <div *ngIf="isAdmin">
                        <button *ngIf="isAdmin" mat-raised-button color="primary" (click)="onReleased()">Liberar Revision</button>
                        <button *ngIf="isAdmin" mat-raised-button color="primary" (click)="onRework()">Re-trabajar</button>
                    </div>
                </div>              
                <button mat-button matStepperPrevious>Back</button>
              <button mat-button matStepperNext>Next</button>
          </mat-step>        
          <mat-step *ngIf="laboratoryGrade.status == LaboratoryGradeStatus.initial || laboratoryGrade.status == LaboratoryGradeStatus.rework" label="Sube tu video">
              <div *ngIf="laboratoryGrade.studentData" class="studentData">
                <h1>Sube tu video</h1>
                <video *ngIf="laboratoryGrade.studentData && laboratoryGrade.studentData.videoUrl" controls width="100%">
                    <source src="{{laboratoryGrade.studentData.videoUrl}}" type='video/mp4'/>
                </video>     
                <app-file-loader [basepath]="getBasePath()" (onload)="fileLoaded($event)" (ondelete)="fileDeleted($event)"></app-file-loader>                  
                <button mat-raised-button color="primary" (click)="onCompleted()">Enviar a Revision</button>
              </div> 
          </mat-step>
      </mat-stepper>
</div>  